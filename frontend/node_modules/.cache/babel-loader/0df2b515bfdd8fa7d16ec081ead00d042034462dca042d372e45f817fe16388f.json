{"ast":null,"code":"var _jsxFileName = \"/Users/lwi/Foodniverse3.0/frontend/src/components/AIAgentBubble/AIAgentBubble.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { FaTimes } from \"react-icons/fa\";\nimport LunrAvatar from \"../LunrAvatar/LunrAvatar\";\nimport API from \"../../utils/api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AIAgentBubble = ({\n  mode = \"manual\",\n  partnerName = \"\",\n  aiMessage = \"\",\n  onConfirm = () => {},\n  onClose = () => {}\n}) => {\n  _s();\n  const [open, setOpen] = useState(mode === \"triggered\");\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [chatSessionMode, setChatSessionMode] = useState(\"normal\");\n  const [showMemory, setShowMemory] = useState(false);\n  const [memoryData, setMemoryData] = useState([]);\n  const [currentEmotion, setCurrentEmotion] = useState(\"NEUTRAL\");\n  const trackIgnoredLunr = async () => {\n    try {\n      await API.post(\"/ai/lunr/ignored\");\n    } catch (err) {\n      console.error(\"‚ùå Failed to update Lunr emotion on ignore.\");\n    }\n  };\n  const fetchLunrEmotion = async () => {\n    try {\n      const res = await API.get(\"/ai/lunr-profile\");\n      const emotion = res.data.currentEmotion || \"NEUTRAL\";\n\n      // ‚úÖ ‚¨áÔ∏è Add this line to update the state\n      setCurrentEmotion(emotion); // <-- You must define this state using useState\n\n      const greetings = {\n        NEUTRAL: \"Hi there üåô I'm Lunr ‚Äî your Foodniverse assistant.\",\n        HAPPY: \"Hey! üòä I‚Äôve been looking forward to chatting again!\",\n        FRIENDLY: \"You‚Äôre back! üíô Ready to explore?\",\n        SAD: \"I thought you forgot about me... üò¢\",\n        MAD: \"Took you long enough! Just kidding. Maybe. üò§\",\n        EXCITED: \"Yessss! Let‚Äôs go discover deliciousness! ‚ú®\",\n        LOVING: \"You're my favorite person to talk food with üíñ Let‚Äôs make this moment special!\"\n      };\n      setMessages([{\n        sender: \"ai\",\n        text: greetings[emotion]\n      }]);\n      if ((emotion === \"SAD\" || emotion === \"ANGRY\") && !open) {\n        setTimeout(() => {\n          setOpen(true);\n          setMessages(prev => [...prev, {\n            sender: \"ai\",\n            text: emotion === \"SAD\" ? \"Hey... are we still food buddies? üò¢\" : \"You‚Äôve been ghosting me. Not cool üò§\"\n          }]);\n        }, 10000);\n      }\n    } catch (err) {\n      console.error(\"Failed to fetch Lunr emotion.\");\n      setMessages([{\n        sender: \"ai\",\n        text: \"Hi there üåô I'm Lunr ‚Äî your Foodniverse assistant.\"\n      }]);\n    }\n  };\n  useEffect(() => {\n    if (mode === \"manual\") fetchLunrEmotion();\n    if (mode === \"triggered\" && partnerName) {\n      setMessages([{\n        sender: \"ai\",\n        text: `Hey üëã I noticed you and ${partnerName} have shared meaningful memories.`\n      }, {\n        sender: \"ai\",\n        text: aiMessage || `Would you like me to start a private thread for you two?`\n      }]);\n    }\n  }, [mode, partnerName, aiMessage]);\n  const startTasteJourney = async () => {\n    try {\n      await API.post(\"/ai/taste-profiler/start\");\n      setChatSessionMode(\"tasteProfiler\");\n      setMessages(prev => [...prev, {\n        sender: \"ai\",\n        text: \"Awesome! Let's craft your unique Food Profile... üçΩÔ∏èüí¨\"\n      }]);\n      const startQuestion = await API.post(\"/ai/taste-profiler/chat\", {\n        text: \"start\"\n      });\n      setMessages(prev => [...prev, {\n        sender: \"ai\",\n        text: startQuestion.data.nextQuestion\n      }]);\n    } catch (err) {\n      console.error(\"‚ùå Taste journey start error:\", err);\n    }\n  };\n  const sendReply = async () => {\n    if (!input.trim()) return;\n    const userInput = input.trim();\n    setMessages(prev => [...prev, {\n      sender: \"user\",\n      text: userInput\n    }]);\n    setInput(\"\");\n    try {\n      if (chatSessionMode === \"tasteProfiler\") {\n        const res = await API.post(\"/ai/taste-profiler/chat\", {\n          text: userInput\n        });\n        if (res.data.done) {\n          const profile = res.data.profile;\n          const summary = `\\nüåü Here's your Taste Passport:\\n\\n- Flavors: ${Object.entries(profile.flavors).map(([k, v]) => `${k}: ${v}`).join(\", \")}\\n- Aromas: ${Object.entries(profile.aromas).map(([k, v]) => `${k}: ${v}`).join(\", \")}\\n- Textures: ${Object.entries(profile.textures).map(([k, v]) => `${k}: ${v}`).join(\", \")}\\n- Temperatures: ${Object.entries(profile.temperatures).map(([k, v]) => `${k}: ${v}`).join(\", \")}\\n- Cultural Focus: ${profile.culturalFocus}\\n- Exploration Tendency: ${profile.explorationTendency}\\n- Dietary Restrictions: ${profile.dietaryRestrictions.length ? profile.dietaryRestrictions.join(\", \") : \"None\"}\\n\\nüéØ You're ready to discover amazing food!`;\n          setChatSessionMode(\"normal\");\n          setMessages(prev => [...prev, {\n            sender: \"ai\",\n            text: \"üéâ Done! Your Taste Passport is ready! Let's explore flavors perfect for you.\"\n          }, {\n            sender: \"ai\",\n            text: summary\n          }]);\n        } else {\n          setMessages(prev => [...prev, {\n            sender: \"ai\",\n            text: res.data.nextQuestion\n          }]);\n        }\n      } else {\n        const res = await API.post(\"/ai/chat\", {\n          prompt: userInput\n        });\n        setMessages(prev => [...prev, {\n          sender: \"ai\",\n          text: res.data.reply\n        }]);\n      }\n    } catch (err) {\n      console.error(\"‚ùå Lunr AI chat error:\", err);\n      setMessages(prev => [...prev, {\n        sender: \"ai\",\n        text: \"Oops. Something went wrong, try again later.\"\n      }]);\n    }\n  };\n  const fetchTasteMemory = async () => {\n    try {\n      const res = await API.get(\"/ai/taste-profiler/memory\");\n      setMemoryData(res.data.memory);\n      setShowMemory(true);\n    } catch (err) {\n      console.error(\"‚ùå Fetch Taste Memory failed:\", err);\n      setMessages(prev => [...prev, {\n        sender: \"ai\",\n        text: \"Oops. Could not load your Taste Journey.\"\n      }]);\n    }\n  };\n  const handleQuickReply = async reply => {\n    setMessages(prev => [...prev, {\n      sender: \"user\",\n      text: reply\n    }]);\n    if (reply.toLowerCase().includes(\"yes\")) {\n      setMessages(prev => [...prev, {\n        sender: \"ai\",\n        text: `Awesome üåü Creating the thread...`\n      }]);\n      setTimeout(() => onConfirm(), 1500);\n    } else {\n      setMessages(prev => [...prev, {\n        sender: \"ai\",\n        text: `No worries! I'm here whenever you need me.`\n      }]);\n      setTimeout(() => onClose(), 2000);\n    }\n  };\n  return /*#__PURE__*/createPortal(/*#__PURE__*/_jsxDEV(_Fragment, {\n    children: open ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed bottom-5 right-5 w-80 bg-white shadow-2xl rounded-2xl border border-blue-200 z-[9999] flex flex-col overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-600 text-white px-4 py-2 flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Lunr\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FaTimes, {\n          className: \"cursor-pointer\",\n          onClick: () => {\n            setOpen(false);\n            trackIgnoredLunr();\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 space-y-2 overflow-y-auto max-h-72\",\n        children: [messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `text-sm ${msg.sender === \"ai\" ? \"text-gray-700\" : \"text-right text-blue-600 font-semibold\"}`,\n          children: msg.text\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 15\n        }, this)), mode === \"manual\" && chatSessionMode === \"normal\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 flex justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: startTasteJourney,\n            className: \"bg-blue-600 text-white text-xs px-4 py-2 rounded-full hover:bg-blue-700 transition\",\n            children: \"\\uD83C\\uDF74 Start My Taste Journey\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 15\n        }, this), showMemory && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 border-t pt-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-semibold text-gray-700 mb-2\",\n            children: \"\\uD83D\\uDCDC Your Taste Journey:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 17\n          }, this), memoryData.map((step, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: [\"Step \", step.step, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 23\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 48\n              }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                children: \"AI asked:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 23\n              }, this), \" \", step.aiQuestion, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 58\n              }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                children: \"You replied:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 23\n              }, this), \" \", step.userAnswer]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-600 mt-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                children: \"Reasoning:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 23\n              }, this), \" \", step.reasoning.join(\"; \")]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-600 mt-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                children: \"Updated Taste:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 23\n              }, this), \" \", JSON.stringify(step.profileUpdate)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n              className: \"my-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 21\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 19\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }, this), mode === \"manual\" || chatSessionMode === \"tasteProfiler\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col p-2 border-t\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: input,\n            onChange: e => setInput(e.target.value),\n            onKeyDown: e => e.key === \"Enter\" && sendReply(),\n            placeholder: \"Type your message...\",\n            className: \"flex-1 text-sm px-3 py-2 border rounded-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: sendReply,\n            className: \"ml-2 text-sm bg-blue-500 text-white px-4 py-2 rounded-full\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: fetchTasteMemory,\n          className: \"mt-2 text-xs text-blue-500 hover:underline\",\n          children: \"\\uD83D\\uDCDC View My Full Taste Journey\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-2 flex justify-between border-t\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleQuickReply(\"Yes\"),\n          className: \"bg-blue-600 text-white px-4 py-2 rounded-full text-xs\",\n          children: \"Yes, create thread\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleQuickReply(\"No\"),\n          className: \"bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-xs\",\n          children: \"No, thanks\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full shadow-xl z-[9999]\",\n      onClick: () => setOpen(true),\n      children: /*#__PURE__*/_jsxDEV(LunrAvatar, {\n        emotion: currentEmotion,\n        size: 32\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 9\n    }, this)\n  }, void 0, false), document.body);\n};\n_s(AIAgentBubble, \"4DPRoSf2UqrsMeA1UDydSnpA9x0=\");\n_c = AIAgentBubble;\nexport default AIAgentBubble;\nvar _c;\n$RefreshReg$(_c, \"AIAgentBubble\");","map":{"version":3,"names":["React","useState","useEffect","createPortal","FaTimes","LunrAvatar","API","jsxDEV","_jsxDEV","Fragment","_Fragment","AIAgentBubble","mode","partnerName","aiMessage","onConfirm","onClose","_s","open","setOpen","messages","setMessages","input","setInput","chatSessionMode","setChatSessionMode","showMemory","setShowMemory","memoryData","setMemoryData","currentEmotion","setCurrentEmotion","trackIgnoredLunr","post","err","console","error","fetchLunrEmotion","res","get","emotion","data","greetings","NEUTRAL","HAPPY","FRIENDLY","SAD","MAD","EXCITED","LOVING","sender","text","setTimeout","prev","startTasteJourney","startQuestion","nextQuestion","sendReply","trim","userInput","done","profile","summary","Object","entries","flavors","map","k","v","join","aromas","textures","temperatures","culturalFocus","explorationTendency","dietaryRestrictions","length","prompt","reply","fetchTasteMemory","memory","handleQuickReply","toLowerCase","includes","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","msg","i","step","idx","aiQuestion","userAnswer","reasoning","JSON","stringify","profileUpdate","value","onChange","e","target","onKeyDown","key","placeholder","size","document","body","_c","$RefreshReg$"],"sources":["/Users/lwi/Foodniverse3.0/frontend/src/components/AIAgentBubble/AIAgentBubble.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { FaTimes } from \"react-icons/fa\";\nimport LunrAvatar from \"../LunrAvatar/LunrAvatar\";\nimport API from \"../../utils/api\";\n\nconst AIAgentBubble = ({\n  mode = \"manual\",\n  partnerName = \"\",\n  aiMessage = \"\",\n  onConfirm = () => {},\n  onClose = () => {}\n}) => {\n  const [open, setOpen] = useState(mode === \"triggered\");\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [chatSessionMode, setChatSessionMode] = useState(\"normal\");\n  const [showMemory, setShowMemory] = useState(false);\n  const [memoryData, setMemoryData] = useState([]);\n  const [currentEmotion, setCurrentEmotion] = useState(\"NEUTRAL\");\n\n  const trackIgnoredLunr = async () => {\n    try {\n      await API.post(\"/ai/lunr/ignored\");\n    } catch (err) {\n      console.error(\"‚ùå Failed to update Lunr emotion on ignore.\");\n    }\n  };\n\n  const fetchLunrEmotion = async () => {\n    try {\n      const res = await API.get(\"/ai/lunr-profile\");\n      const emotion = res.data.currentEmotion || \"NEUTRAL\";\n  \n      // ‚úÖ ‚¨áÔ∏è Add this line to update the state\n      setCurrentEmotion(emotion); // <-- You must define this state using useState\n  \n      const greetings = {\n        NEUTRAL: \"Hi there üåô I'm Lunr ‚Äî your Foodniverse assistant.\",\n        HAPPY: \"Hey! üòä I‚Äôve been looking forward to chatting again!\",\n        FRIENDLY: \"You‚Äôre back! üíô Ready to explore?\",\n        SAD: \"I thought you forgot about me... üò¢\",\n        MAD: \"Took you long enough! Just kidding. Maybe. üò§\",\n        EXCITED: \"Yessss! Let‚Äôs go discover deliciousness! ‚ú®\",\n        LOVING: \"You're my favorite person to talk food with üíñ Let‚Äôs make this moment special!\"\n      };\n  \n      setMessages([{ sender: \"ai\", text: greetings[emotion] }]);\n  \n      if ((emotion === \"SAD\" || emotion === \"ANGRY\") && !open) {\n        setTimeout(() => {\n          setOpen(true);\n          setMessages(prev => [\n            ...prev,\n            {\n              sender: \"ai\",\n              text:\n                emotion === \"SAD\"\n                  ? \"Hey... are we still food buddies? üò¢\"\n                  : \"You‚Äôve been ghosting me. Not cool üò§\"\n            }\n          ]);\n        }, 10000);\n      }\n    } catch (err) {\n      console.error(\"Failed to fetch Lunr emotion.\");\n      setMessages([{ sender: \"ai\", text: \"Hi there üåô I'm Lunr ‚Äî your Foodniverse assistant.\" }]);\n    }\n  };\n  \n\n  useEffect(() => {\n    if (mode === \"manual\") fetchLunrEmotion();\n    if (mode === \"triggered\" && partnerName) {\n      setMessages([\n        { sender: \"ai\", text: `Hey üëã I noticed you and ${partnerName} have shared meaningful memories.` },\n        { sender: \"ai\", text: aiMessage || `Would you like me to start a private thread for you two?` },\n      ]);\n    }\n  }, [mode, partnerName, aiMessage]);\n\n  const startTasteJourney = async () => {\n    try {\n      await API.post(\"/ai/taste-profiler/start\");\n      setChatSessionMode(\"tasteProfiler\");\n      setMessages(prev => [...prev, { sender: \"ai\", text: \"Awesome! Let's craft your unique Food Profile... üçΩÔ∏èüí¨\" }]);\n      const startQuestion = await API.post(\"/ai/taste-profiler/chat\", { text: \"start\" });\n      setMessages(prev => [...prev, { sender: \"ai\", text: startQuestion.data.nextQuestion }]);\n    } catch (err) {\n      console.error(\"‚ùå Taste journey start error:\", err);\n    }\n  };\n\n  const sendReply = async () => {\n    if (!input.trim()) return;\n    const userInput = input.trim();\n    setMessages(prev => [...prev, { sender: \"user\", text: userInput }]);\n    setInput(\"\");\n\n    try {\n      if (chatSessionMode === \"tasteProfiler\") {\n        const res = await API.post(\"/ai/taste-profiler/chat\", { text: userInput });\n        if (res.data.done) {\n          const profile = res.data.profile;\n          const summary = `\\nüåü Here's your Taste Passport:\\n\\n- Flavors: ${Object.entries(profile.flavors).map(([k, v]) => `${k}: ${v}`).join(\", \")}\\n- Aromas: ${Object.entries(profile.aromas).map(([k, v]) => `${k}: ${v}`).join(\", \")}\\n- Textures: ${Object.entries(profile.textures).map(([k, v]) => `${k}: ${v}`).join(\", \")}\\n- Temperatures: ${Object.entries(profile.temperatures).map(([k, v]) => `${k}: ${v}`).join(\", \")}\\n- Cultural Focus: ${profile.culturalFocus}\\n- Exploration Tendency: ${profile.explorationTendency}\\n- Dietary Restrictions: ${profile.dietaryRestrictions.length ? profile.dietaryRestrictions.join(\", \") : \"None\"}\\n\\nüéØ You're ready to discover amazing food!`;\n          setChatSessionMode(\"normal\");\n          setMessages(prev => [\n            ...prev,\n            { sender: \"ai\", text: \"üéâ Done! Your Taste Passport is ready! Let's explore flavors perfect for you.\" },\n            { sender: \"ai\", text: summary }\n          ]);\n        } else {\n          setMessages(prev => [...prev, { sender: \"ai\", text: res.data.nextQuestion }]);\n        }\n      } else {\n        const res = await API.post(\"/ai/chat\", { prompt: userInput });\n        setMessages(prev => [...prev, { sender: \"ai\", text: res.data.reply }]);\n      }\n    } catch (err) {\n      console.error(\"‚ùå Lunr AI chat error:\", err);\n      setMessages(prev => [...prev, { sender: \"ai\", text: \"Oops. Something went wrong, try again later.\" }]);\n    }\n  };\n\n  const fetchTasteMemory = async () => {\n    try {\n      const res = await API.get(\"/ai/taste-profiler/memory\");\n      setMemoryData(res.data.memory);\n      setShowMemory(true);\n    } catch (err) {\n      console.error(\"‚ùå Fetch Taste Memory failed:\", err);\n      setMessages(prev => [...prev, { sender: \"ai\", text: \"Oops. Could not load your Taste Journey.\" }]);\n    }\n  };\n\n  const handleQuickReply = async (reply) => {\n    setMessages(prev => [...prev, { sender: \"user\", text: reply }]);\n    if (reply.toLowerCase().includes(\"yes\")) {\n      setMessages(prev => [...prev, { sender: \"ai\", text: `Awesome üåü Creating the thread...` }]);\n      setTimeout(() => onConfirm(), 1500);\n    } else {\n      setMessages(prev => [...prev, { sender: \"ai\", text: `No worries! I'm here whenever you need me.` }]);\n      setTimeout(() => onClose(), 2000);\n    }\n  };\n\n  return createPortal(\n    <>\n      {open ? (\n        <div className=\"fixed bottom-5 right-5 w-80 bg-white shadow-2xl rounded-2xl border border-blue-200 z-[9999] flex flex-col overflow-hidden\">\n          <div className=\"bg-blue-600 text-white px-4 py-2 flex justify-between items-center\">\n            <span>Lunr</span>\n            <FaTimes className=\"cursor-pointer\" onClick={() => {\n              setOpen(false);\n              trackIgnoredLunr();\n            }} />\n          </div>\n\n          <div className=\"p-3 space-y-2 overflow-y-auto max-h-72\">\n            {messages.map((msg, i) => (\n              <div key={i} className={`text-sm ${msg.sender === \"ai\" ? \"text-gray-700\" : \"text-right text-blue-600 font-semibold\"}`}>\n                {msg.text}\n              </div>\n            ))}\n\n            {mode === \"manual\" && chatSessionMode === \"normal\" && (\n              <div className=\"mt-2 flex justify-center\">\n                <button\n                  onClick={startTasteJourney}\n                  className=\"bg-blue-600 text-white text-xs px-4 py-2 rounded-full hover:bg-blue-700 transition\"\n                >\n                  üç¥ Start My Taste Journey\n                </button>\n              </div>\n            )}\n\n            {showMemory && (\n              <div className=\"mt-4 border-t pt-3\">\n                <h3 className=\"text-sm font-semibold text-gray-700 mb-2\">üìú Your Taste Journey:</h3>\n                {memoryData.map((step, idx) => (\n                  <div key={idx} className=\"mb-3\">\n                    <p className=\"text-xs text-gray-700\">\n                      <b>Step {step.step}:</b> <br />\n                      <i>AI asked:</i> {step.aiQuestion} <br />\n                      <i>You replied:</i> {step.userAnswer}\n                    </p>\n                    <p className=\"text-xs text-gray-600 mt-1\">\n                      <i>Reasoning:</i> {step.reasoning.join(\"; \")}\n                    </p>\n                    <p className=\"text-xs text-gray-600 mt-1\">\n                      <i>Updated Taste:</i> {JSON.stringify(step.profileUpdate)}\n                    </p>\n                    <hr className=\"my-2\" />\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {(mode === \"manual\" || chatSessionMode === \"tasteProfiler\") ? (\n            <div className=\"flex flex-col p-2 border-t\">\n              <div className=\"flex items-center\">\n                <input\n                  value={input}\n                  onChange={(e) => setInput(e.target.value)}\n                  onKeyDown={(e) => e.key === \"Enter\" && sendReply()}\n                  placeholder=\"Type your message...\"\n                  className=\"flex-1 text-sm px-3 py-2 border rounded-full\"\n                />\n                <button\n                  onClick={sendReply}\n                  className=\"ml-2 text-sm bg-blue-500 text-white px-4 py-2 rounded-full\"\n                >\n                  Send\n                </button>\n              </div>\n              <button\n                onClick={fetchTasteMemory}\n                className=\"mt-2 text-xs text-blue-500 hover:underline\"\n              >\n                üìú View My Full Taste Journey\n              </button>\n            </div>\n          ) : (\n            <div className=\"p-2 flex justify-between border-t\">\n              <button onClick={() => handleQuickReply(\"Yes\")} className=\"bg-blue-600 text-white px-4 py-2 rounded-full text-xs\">\n                Yes, create thread\n              </button>\n              <button onClick={() => handleQuickReply(\"No\")} className=\"bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-xs\">\n                No, thanks\n              </button>\n            </div>\n          )}\n        </div>\n      ) : (\n        <button\n          className=\"fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full shadow-xl z-[9999]\"\n          onClick={() => setOpen(true)}\n        >\n          <LunrAvatar emotion={currentEmotion} size={32} />\n        </button>\n      )}\n    </>,\n    document.body\n  );\n};\n\nexport default AIAgentBubble;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}